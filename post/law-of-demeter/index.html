<!doctype html><html lang=en-us>
<head>
<link href=https://gmpg.org/xfn/11 rel=profile>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<meta name=generator content="Hugo 0.89.2">
<title>Áp dụng Luật Demeter • hoa.d</title>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Áp dụng Luật Demeter">
<meta name=twitter:description content="&ldquo;Không nói chuyện với người lạ&rdquo;
 Giới thiệu Luật Demeter có thể giúp bạn áp dụng các quy tắc trừu tượng hơn của Lập trình Hướng đối tượng (OOP) để đảm bảo ứng dụng có thể mở rộng và có thể bảo trì.
Luật Demeter có các nguyên tắc sau:
 Mỗi đơn vị nên biết ít về đơn vị khác Mỗi đơn vị chỉ nên nói chuyện với bạn của nó (nói các khác, không được nói chuyện với người lạ).">
<meta property="og:title" content="Áp dụng Luật Demeter">
<meta property="og:description" content="&ldquo;Không nói chuyện với người lạ&rdquo;
 Giới thiệu Luật Demeter có thể giúp bạn áp dụng các quy tắc trừu tượng hơn của Lập trình Hướng đối tượng (OOP) để đảm bảo ứng dụng có thể mở rộng và có thể bảo trì.
Luật Demeter có các nguyên tắc sau:
 Mỗi đơn vị nên biết ít về đơn vị khác Mỗi đơn vị chỉ nên nói chuyện với bạn của nó (nói các khác, không được nói chuyện với người lạ).">
<meta property="og:type" content="article">
<meta property="og:url" content="https://hoadh.github.io/post/law-of-demeter/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2020-09-30T03:19:07+07:00">
<meta property="article:modified_time" content="2020-09-30T03:19:07+07:00">
<link rel=stylesheet href=/scss/hyde-hyde.3081c4981fb69a2783dd36ecfdd0e6ba7a158d4cbfdd290ebce8f78ba0469fc6.css integrity="sha256-MIHEmB+2mieD3Tbs/dDmunoVjUy/3SkOvOj3i6BGn8Y=">
<link rel=stylesheet href=/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58+TzH3icCkSHGoJ+ed7w=" media=print>
<link rel=stylesheet href=/scss/tocbot.5ef07cebc3c477b54270456f149ee02922479bb7555fd344b2c69f953b0e7e5e.css integrity="sha256-XvB868PEd7VCcEVvFJ7gKSJHm7dVX9NEssaflTsOfl4="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]-->
<link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png>
<link rel="shortcut icon" href=/favicon.png>
<link rel=stylesheet href=https://hoadh.github.io/css/custom.css>
</head>
<body>
<div class=sidebar>
<div class=container>
<div class=sidebar-about>
<span class=site__title>
<a href=https://hoadh.github.io/>
hoa.d
</a>
</span>
<p class=site__description>
a simple man who loves reading his mind "on-the-fly".
</p>
</div>
<div class=collapsible-menu>
<input type=checkbox id=menuToggle>
<label for=menuToggle>hoa.d</label>
<div class=menu-content>
<div>
<ul class=sidebar-nav>
</ul>
</div>
<section class=social>
<a href=https://facebook.com/hoadng rel=me><i class="fab fa-facebook-f"></i></a>
<a href=https://github.com/hoadh rel=me><i class="fab fa-github fa-lg" aria-hidden=true></i></a>
<a href=https://linkedin.com/in/hoad rel=me><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a>
<a href=https://t.me/hoadang rel=me><i class="fab fa-telegram fa-lg" aria-hidden=true></i></a>
</section>
</div>
</div>
<div class=copyright>
&copy; 2021 hoadh.github.io
</div>
</div>
</div>
<div class="content container">
<article>
<header>
<h1>Áp dụng Luật Demeter</h1>
<div class=post__meta>
<i class="fas fa-calendar-alt"></i> Sep 30, 2020
<br>
<i class="fas fa-clock"></i> 4 min read
</div>
</header>
<div class=toc-wrapper>
<input type=checkbox id=tocToggle>
<label for=tocToggle>Table of Content</label>
<div class=toc id=TableOfContents></div>
</div>
<div class=post>
<blockquote>
<p>&ldquo;Không nói chuyện với người lạ&rdquo;</p>
</blockquote>
<h2 id=giới-thiệu>Giới thiệu</h2>
<p><em>Luật Demeter</em> có thể giúp bạn áp dụng các quy tắc trừu tượng hơn của Lập trình Hướng đối tượng (OOP) để đảm bảo ứng dụng có thể mở rộng và có thể bảo trì.</p>
<p>Luật Demeter có các nguyên tắc sau:</p>
<ul>
<li>Mỗi đơn vị nên biết ít về đơn vị khác</li>
<li>Mỗi đơn vị chỉ nên nói chuyện với bạn của nó (nói các khác, không được nói chuyện với <em>người lạ</em>).</li>
<li>Chỉ nói chuyện với <em>bạn thân</em></li>
</ul>
<p>Trong việc thiết kế phần mềm, <em>loosely coupling</em> (tạm hiểu là &ldquo;liên kết lỏng kéo&rdquo;) là một thuật ngữ được nhắc đến nhiều. Đây một trong những yếu tố giúp phần mềm dễ dàng mở rộng và bảo trì.</p>
<p>Luật Demeter sẽ giúp giảm thiểu <em>tight coupling</em> (phụ thuộc chặt chẽ với nhau) giữa các thành phần trong ứng dụng. Nhờ đó, chúng ta có thể dễ dàng thay thế hoặc mở rộng khi có nhu cầu.</p>
<h2 id=luật-demeter>Luật Demeter</h2>
<h3 id=lý-thuyết>Lý thuyết</h3>
<p>Luật Demeter cho hàm yêu cầu có phương thức M trong object O có thể chỉ liên quan tới các phương thức thuộc các loại object sau:</p>
<ol>
<li>O - chính nó</li>
<li>Object là tham số của hàm M</li>
<li>Bất kì object nào được khởi tạo bên trong M</li>
<li>Object là một thuộc tính của O</li>
<li>Biến global, có thể truy cập được qua O (trong phạm vi M)</li>
</ol>
<h3 id=ví-dụ-tốt>Ví dụ tốt</h3>
<p>Để hiểu rõ về nội dung có phần nặng lý thuyết ở trên, chúng ta có thể xem qua ví dụ sau để có được hình dung đầu tiên. Ví dụ này được viết với ngôn ngữ lập trình Java:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LawOfDemeter</span>
<span style=color:#f92672>{</span>
  <span style=color:#66d9ef>private</span> Topping cheeseTopping<span style=color:#f92672>;</span>
  
  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>goodExamples</span><span style=color:#f92672>(</span>Pizza pizza<span style=color:#f92672>)</span>
  <span style=color:#f92672>{</span>
    Foo foo <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Foo<span style=color:#f92672>();</span>
    
    <span style=color:#75715e>// (1) Trường hợp gọi phương thức của chính nó
</span><span style=color:#75715e></span>    doSomething<span style=color:#f92672>();</span>
    
    <span style=color:#75715e>// (2) Trường hợp gọi các phương thức của đối tượng là tham số đầu vào
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>int</span> price <span style=color:#f92672>=</span> pizza<span style=color:#f92672>.</span><span style=color:#a6e22e>getPrice</span><span style=color:#f92672>();</span>
    
    <span style=color:#75715e>// (3) Trường hợp gọi phương thức của bất kì đối tượng nào được khởi tạo bên trong class này
</span><span style=color:#75715e></span>    cheeseTopping <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> CheeseTopping<span style=color:#f92672>();</span>
    <span style=color:#66d9ef>float</span> weight <span style=color:#f92672>=</span> cheeseTopping<span style=color:#f92672>.</span><span style=color:#a6e22e>getWeightUsed</span><span style=color:#f92672>();</span>
    
    <span style=color:#75715e>// (4) Tương tự trường hợp (3)
</span><span style=color:#75715e></span>    foo<span style=color:#f92672>.</span><span style=color:#a6e22e>doBar</span><span style=color:#f92672>();</span>
  <span style=color:#f92672>}</span>
  
  <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>doSomething</span><span style=color:#f92672>()</span>
  <span style=color:#f92672>{</span>
    <span style=color:#75715e>// ...
</span><span style=color:#75715e></span>  <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#75715e>// Mã nguồn tham khảo tại https://alvinalexander.com/java/java-law-of-demeter-java-examples/
</span></code></pre></div><h3 id=ví-dụ-chưa-tốt>Ví dụ chưa tốt</h3>
<p>Dưới đây là một ví dụ vi phạm các nguyên tắc của Luật Demeter:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BasicExample</span> <span style=color:#f92672>{</span>
 <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getStreetName</span><span style=color:#f92672>(</span>Employee employee<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
  Address address <span style=color:#f92672>=</span> employee<span style=color:#f92672>.</span><span style=color:#a6e22e>getAddress</span><span style=color:#f92672>();</span>
  <span style=color:#66d9ef>return</span> address<span style=color:#f92672>.</span><span style=color:#a6e22e>getStreetName</span><span style=color:#f92672>();</span>
 <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>Để có được <code>address</code>, chúng ta gọi phương thức <code>getAddress()</code> của <code>employee</code> tại dòng thứ ba. Đối tượng <code>address</code> không phải là đối tượng được liệt kê trong danh sách các tình huống mà chúng ta được phép tương tác trực tiếp. Thế nhưng tại dòng thứ tư, chúng ta thấy rằng kết quả trả về được lấy từ phương thức <code>getStreetName()</code> thuộc đối tượng <code>address</code>.</p>
<h3 id=giải-pháp-khắc-phục>Giải pháp khắc phục</h3>
<p>Thay vì gọi trực tiếp <code>getStreetName()</code> từ <code>address</code> để lấy được thông tin tên đường phố, chúng ta tách đoạn mã trên và khai báo một phương thức trong khai báo class <code>Employee</code> để trả về giá trị từ <code>getStreetName()</code>. Nhờ thế, chúng ta có thể gọi trực tiếp phương thức <code>getStreetName()</code> này với đối tượng <code>employee</code> như dưới đây:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Employee</span> <span style=color:#f92672>{</span>
 <span style=color:#66d9ef>private</span> Address address<span style=color:#f92672>;</span>
 <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getStreetName</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
  <span style=color:#66d9ef>return</span> address<span style=color:#f92672>.</span><span style=color:#a6e22e>getStreetName</span><span style=color:#f92672>();</span>
 <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BasicExample</span> <span style=color:#f92672>{</span>
 <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getStreetName</span><span style=color:#f92672>(</span>Employee emplyee<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
  employee<span style=color:#f92672>.</span><span style=color:#a6e22e>getStreetName</span><span style=color:#f92672>();</span>
 <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h2 id=lợi-ích>Lợi ích</h2>
<p>Việc tuân thủ các nguyên tắc trong Luật Demeter sẽ giúp chúng ta đạt được những lợi ích dưới đây khi lập trình:</p>
<ul>
<li>Các đối tượng sẽ tránh được việc phụ thuộc chặt chẽ với nhau</li>
<li>Tái sử dụng class dễ dàng hơn</li>
<li>Dễ dàng thay thế class khi yêu cầu thiết kế thay đổi</li>
<li>Mã nguồn dễ kiểm thử hơn</li>
<li>Các class được thiết kế theo hướng này sẽ ít lỗi hơn</li>
</ul>
<h2 id=kết-luận>Kết luận</h2>
<p>Hiểu về <em>Luật Demeter</em> và áp dụng được vào lập trình sẽ giúp bạn có sản phẩm được thiết kế tốt hơn. Bên cạnh đó, khi kết hợp với những kỹ năng về Refactoring (Tái cấu trúc mã nguồn - Chủ đề của Tạp Chí Lập Trình vol.8) sẽ giúp bạn cải thiện được chất lượng mã nguồn. Hy vọng bài viết này giúp bạn có thêm chút kiến thức để dễ dàng ra quyết định khi thực hiện các nhiệm vụ liên quan đến <em>refactoring</em>.</p>
</div>
<div id=disqus_thread></div>
<script type=text/javascript>(function(){var a,b;if(location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="")return;a=document.createElement('script'),a.type='text/javascript',a.async=!0,b='hoa-d',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script>
<noscript>
Please enable JavaScript to view the
<a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a>
</noscript>
<a href=http://disqus.com/ class=dsq-brlink>comments powered by
<span class=logo-disqus>Disqus</span>
</a>
</article>
</div>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-YLG1KEYLCC','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<script defer src=https://use.fontawesome.com/releases/v5.12.1/js/all.js integrity=sha384-ZbbbT1gw3joYkKRqh0kWyRp32UAvdqkpbLedQJSlnI8iLQcFVxaGyrOgOJiDQTTR crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.js></script>
<script type=text/javascript>tocbot&&tocbot.init({tocSelector:'.toc',contentSelector:'.post',headingSelector:'h2, h3, h4',collapseDepth:4})</script>
</body>
</html>